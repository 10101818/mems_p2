webpackJsonp([1],{"2nBk":function(t,e){},"3BY8":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("P9l9"),a=i("Y2UX"),s=i.n(a),l=i("eeqE"),r=i("F+jZ"),o=i("I+VY"),c=i("3Jf1"),d=i("Wd67"),h=i("81sW"),m={components:{EventList:c.a,KpiList:d.a,Timeline:h.Timeline,TimelineItem:h.TimelineItem,TimelineTitle:h.TimelineTitle},data(){return{timelineTitle:"",timeline:[],name1:this.$route.query.name,currentData:{name:""},chart1:{data:[]},chart3:{data:[],list:[],chart:null}}},computed:{},created(){this.getChart1().then(()=>{this.currentData=this.chart1.data[0],this.renderChart1(),this.getChart3().then(()=>{this.renderChart3()}),this.getTimeline()})},methods:{navigateTo:function(t){console.log(t),t.event.indexOf("维修")>-1&&window.open("page/DMApproveRepairApplication.html")},getChart1(){return new Promise(t=>{this.chart1.data=[],o.d.forEach((t,e)=>{t.所属科室===this.name1&&this.chart1.data.push({name:t.设备名称+" "+t.品牌+" "+t.型号+"?"+e,brand:t.品牌,model:t.型号,"收入":this.random(80,100),"支出":this.random(80,100),value:t.单价/1e4,seriesNumber:t.资产编号,department:t.所属科室,start_time:t.开始使用日期,status:"开机"})}),t()})},random:(t,e)=>Math.floor(Math.random()*(e-t))+t,getChart3(){let t=this;return new Promise(e=>{t.chart3.list=o.c;var i=(new(0,l.DataSet.DataView)).source(t.chart3.list);i.transform({type:"fold",fields:["value"],key:"user",value:"score"}),this.chart3.data=i,e(i),Object(n.d)().then(t=>{})})},getTimeline(){this.timelineTitle=o.e.equipment,this.timeline=o.e.timeline},renderChart1(){let t=this;var e=new l.DataSet.DataView;e.source(this.chart1.data).transform({type:"map",callback:function(t){return t["支出"]*=-1,t}}).transform({type:"fold",fields:["收入","支出"],key:"opinion",value:"value",retains:["name"]}),console.log(e);var i={"收入":"#86C7E6","支出":"#1B85E7"},n=new s.a.Chart({container:"chart1",forceFit:!0,height:document.querySelector("#chart1").clientHeight,padding:[Object(r.b)(1.6),0,0,0]});n.source(e),n.axis(!1),this.chart1.data.forEach(function(t,e){t["支出"]>t["收入"]&&n.guide().regionFilter({top:!0,start:[e-.25,-t["收入"]],end:[e+.25,-t["支出"]],color:"#E2340D"})}),n.tooltip({inPlot:!0,useHtml:!0,htmlContent:function(e,i){let n={};return t.chart1.data.forEach(t=>{t.name===e&&(n=t)}),`<div class="g2-tooltip">\n                  <div class="g2-tooltip-title">${e.split("?")[0]}</div>\n                  <ul class="g2-tooltip-list">\n                    <li class="g2-tooltip-li">设备价值：${t.numberComma(n.value)}万</li>\n                    <li class="g2-tooltip-li">型号：${t.numberComma(n.model)}</li>\n                    <li class="g2-tooltip-li">品牌：${t.numberComma(n.brand)}</li>\n                    <li class="g2-tooltip-li">收入：${t.numberComma(n.收入)}万</li>\n                    <li class="g2-tooltip-li">支出：${t.numberComma(n.支出)}万</li>\n                  </ul>\n                </div>`}}),n.legend({custom:!0,itemWidth:Object(r.b)(1.4),items:[{value:"收入",marker:{symbol:"square",fill:i["收入"],radius:Object(r.b)(.1)}},{value:"支出",marker:{symbol:"square",fill:i["支出"],radius:Object(r.b)(.1)}}],position:"top-left",offsetX:Object(r.b)(.2),offsetY:-Object(r.b)(.2),textStyle:{fill:"#000",fontSize:Object(r.b)(.36)},hoverable:!1,reactive:!1,clickable:!1}),n.coord(),n.intervalStack().position("name*value").color("opinion",function(t){return i[t]}),n.on("click",e=>{var i=n.getSnapRecords({x:e.x,y:e.y});console.log(i);const a=i[0]._origin.name;var s=t.chart1.data.find(function(t){return t.name===a});console.log(s),t.currentData=s,t.getChart3().then(e=>{t.chart3.chart.changeData(e)}),t.getTimeline()}),n.render()},renderChart3(){this.chart3.chart=new s.a.Chart({container:"chart3",forceFit:!0,height:document.querySelector("#chart3").clientHeight,padding:[Object(r.b)(.5),Object(r.b)(.2),0,Object(r.b)(.1)]}),this.chart3.chart.source(this.chart3.data,{score:{min:0,max:10}}),this.chart3.chart.coord("polar",{radius:.6}),this.chart3.chart.axis("item",{line:null,label:{textStyle:{fontSize:Object(r.b)(.4),fontWeight:"bold"}},tickLine:null,grid:{lineStyle:{lineDash:null},hideFirstLine:!1}}),this.chart3.chart.axis("score",{label:null,line:null,tickLine:null,grid:{type:"polygon",lineStyle:{lineWidth:Object(r.b)(.02),lineDash:null}}}),this.chart3.chart.legend(!1),this.chart3.chart.tooltip({"g2-tooltip":{"background-color":"rgba(0, 0, 0, 0.7)",color:"#ddd"},itemTpl:'<li style="font-size: .4rem;">次数：{value}</li>'}),this.chart3.chart.line().position("item*score").color("user").size(Object(r.b)(.01)),this.chart3.chart.area().position("item*score").color("user"),this.chart3.chart.render()},numberComma:(t,e=3)=>((t=String(t).split("."))[0]=t[0].replace(new RegExp("(\\d)(?=(\\d{"+e+"})+$)","ig"),"$1,"),t.join("."))}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"b-left"},[i("div",{staticClass:"b-left-top"},[i("div",{staticClass:"chart1-box"},[i("div",{staticClass:"name"},[t._v(t._s(t.name1))]),t._v(" "),i("div",{staticClass:"list-box1"},[i("div",{staticClass:"list"},[i("div",{staticClass:"total"},[i("div",{staticClass:"value"},[t._v(t._s(t.numberComma(2260.09)))]),t._v(" "),i("div",{staticClass:"text"},[t._v("总收入（万元）")])]),t._v(" "),t._m(0)]),t._v(" "),i("div",{staticClass:"list"},[i("div",{staticClass:"total"},[i("div",{staticClass:"value"},[t._v(t._s(t.numberComma(1563.09)))]),t._v(" "),i("div",{staticClass:"text"},[t._v("总支出（万元）")])]),t._v(" "),t._m(1)])]),t._v(" "),i("div",{attrs:{id:"chart1"}})])]),t._v(" "),i("div",{staticClass:"b-left-bottom"},[i("div",{staticClass:"name"},[t._v("\n        "+t._s(t.currentData.name.split("?")[0])+"\n        "),i("br"),t._v(" "),i("p",{staticStyle:{"margin-top":".5rem"}},[t._v(t._s(t.currentData.seriesNumber))])]),t._v(" "),i("div",{staticClass:"name-lower-box"},[i("div",{staticClass:"name-lower"},[t._v("当前位置："+t._s(t.currentData.department))]),t._v(" "),i("div",{staticClass:"name-lower"},[t._v("安装日期："+t._s(t.currentData.start_time))]),t._v(" "),i("div",{staticClass:"name-lower"},[t._v("当前状态："+t._s(t.currentData.status))])]),t._v(" "),i("div",{attrs:{id:"chart3"}}),t._v(" "),i("div",{staticClass:"list3"},t._l(t.chart3.list,function(e,n){return i("div",{key:n,staticClass:"item"},[i("span",{staticClass:"title"},[t._v(t._s(e.item)+"次数：")]),t._v(" "),i("span",{staticClass:"count"},[t._v(t._s(e.value)+"次")])])}),0)])]),t._v(" "),i("div",{staticClass:"b-right"},[i("div",{staticClass:"b-right-content"},[i("div",{staticClass:"timeline-title",staticStyle:{"font-size":"32px"}},[t._v(t._s(t.timelineTitle))]),t._v(" "),i("div",{staticClass:"b-timeline"},[i("timeline",t._l(t.timeline,function(e,n){return i("timeline-item",{key:n,attrs:{"bg-color":e.color},nativeOn:{click:function(i){return t.navigateTo(e)}}},[t._v(t._s(e.date)+" "+t._s(e.event)+"\n          ")])}),1)],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"status up"},[e("div",{staticClass:"value"},[e("span",[this._v("23.45%")]),this._v(" "),e("span",{staticClass:"iconfont icon-shang"})]),this._v(" "),e("div",{staticClass:"text"},[this._v("\n                同比\n              ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"status down"},[e("div",{staticClass:"value"},[e("span",[this._v("23.45%")]),this._v(" "),e("span",{staticClass:"iconfont icon-shang"})]),this._v(" "),e("div",{staticClass:"text"},[this._v("\n                同比\n              ")])])}]};var v=i("C7Lr")(m,u,!1,function(t){i("2nBk")},"data-v-43440f5f",null);e.default=v.exports},"81sW":function(t,e,i){(function(t){"use strict";!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),i=" .timeline { padding: 0; position: relative; list-style: none; font-family: PingFangSC-light, Avenir, Helvetica, Arial, Hiragino Sans GB, Microsoft YaHei, sans-serif; -webkit-font-smoothing: antialiased; margin: 10px 20px; } .timeline:after { position: absolute; content: ''; left: 0; top: 0; width: 1px; height: 100%; background-color: var(--timelineTheme); } .timeline-item { position: relative; margin: 1.5em 0 0 28px; padding-bottom: 1.5em; border-bottom: 1px dotted var(--timelineTheme); } .timeline-item:last-child { border-bottom: none; } .timeline-circle { position: absolute; top: .28em; left: -34px; width: 10px; height: 10px; border-radius: 50%; border: 1px solid var(--timelineTheme); background-color: var(--timelineTheme); z-index: 1; box-sizing: content-box; } .timeline-circle.hollow { background-color: var(--timelineBg); } .timeline-title { position: relative; display: inline-block; /** * BFC inline-block 元素与其兄弟元素、子元素和父元素的外边距都不会折叠（包括其父元素和子元素） */ cursor: crosshair; margin: -.15em 0 15px 28px } .timeline-title:not(:first-child) { margin-top: 28px; } .timeline-title-circle { left: -36px; top: .15em; width: 16px; height: 16px; } .timeline-others { width: 40px; height: auto; top: .2em; left: -48px; line-height: 1; padding: 2px 0; text-align: center; border: none; background-color: var(--timelineBg); } ";e.type="text/css",e.styleSheet?e.styleSheet.cssText=i:e.appendChild(document.createTextNode(i)),t.appendChild(e)}}();var e={render:function(){var t=this.$createElement;return(this._self._c||t)("ul",{ref:"timeline",staticClass:"timeline"},[this._t("default")],2)},staticRenderFns:[],name:"Timeline",props:{timelineTheme:{type:String,default:"#dbdde0"},timelineBg:{type:String,default:"#fff"}},mounted:function(){var t=this.$refs.timeline;t.style.setProperty("--timelineTheme",this.timelineTheme),t.style.setProperty("--timelineBg",this.timelineBg)}};!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),t.appendChild(e)}}();var i={name:"TimelineItemBase",props:{bgColor:{type:String,default:""},lineColor:{type:String,default:""},hollow:{type:Boolean,default:!1},fontColor:{type:String,default:"#37414a"}},data:function(){return{slotOthers:!1}},computed:{circleStyle:function(){if(this.bgColor||this.lineColor||this.hollow){var t={};return this.bgColor&&(t={"border-color":this.bgColor,"background-color":this.bgColor}),this.lineColor&&(t=Object.assign({},t,{"border-color":this.lineColor})),t}},itemStyle:function(){return{color:this.fontColor}},slotClass:function(){var t="";return this.slotOthers?t="timeline-others":this.hollow&&(t="hollow"),t}},mounted:function(){this.slotOthers=!!this.$refs.others.innerHTML}};!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),t.appendChild(e)}}();var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"timeline-item",style:this.itemStyle},[e("div",{ref:"others",staticClass:"timeline-circle",class:this.slotClass,style:this.circleStyle},[this._t("others")],2),this._v(" "),this._t("default")],2)},staticRenderFns:[],extends:i};!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),t.appendChild(e)}}();var a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"timeline-title",style:this.itemStyle},[e("div",{ref:"others",staticClass:"timeline-circle timeline-title-circle",class:this.slotClass,style:this.circleStyle},[this._t("others")],2),this._v(" "),this._t("default")],2)},staticRenderFns:[],extends:i};"undefined"!=typeof window&&window.Vue&&(window.Vue.component(e.name,e),window.Vue.component(n.name,n),window.Vue.component(a.name,a)),t.Timeline=e,t.TimelineItem=n,t.TimelineTitle=a,Object.defineProperty(t,"__esModule",{value:!0})})(e)}});
//# sourceMappingURL=1.a048cc47038d4bee9375.js.map