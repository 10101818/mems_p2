webpackJsonp([1],{"1kS7":function(t,e){e.f=Object.getOwnPropertySymbols},"3BY8":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("woOf"),a=i.n(n),r=i("//Fk"),s=i.n(r),o=i("P9l9"),l=i("b7ct"),c=i.n(l),d=i("ifQC"),u=i("F+jZ"),m=i("3Jf1"),h=i("Wd67"),p=i("6dj7"),f={components:{EventList:m.a,KpiList:h.a,Timeline:p.Timeline,TimelineItem:p.TimelineItem,TimelineTitle:p.TimelineTitle},data:function(){return{timelineTitle:"",timeline:[],id:this.$route.query.id,currentData:{name:"",start_time:""},name1:"",chart1:{data:[]},income:0,incomeLast:0,rate1:0,rate2:0,expense:0,expenseLast:0,chart3:{data:[],list:[],chart:null},maxCount:0,radarTemplate:[{item:"维修"},{item:"巡检"},{item:"保养"},{item:"校正"},{item:"强检"}]}},computed:{},created:function(){var t=this;this.getChart1().then(function(){t.chart1.data.length?t.currentData=t.chart1.data[0]:t.currentData={ID:0,name:"",brand:"",model:"",value:"",seriesNumber:"",department:"",start_time:"",status:""},t.renderChart1(),t.getChart3().then(function(){t.renderChart3()}),t.getTimeline()})},methods:{navigateTo:function(t){0!=t.id&&(window.location.href=u.a+"/Dispatch/DispatchResponse?dispatchID="+t.id+"&requestType="+t.requestType)},returnToDashboard:function(){this.$router.push("indexU")},getChart1:function(){var t=this;return new s.a(function(e){Object(o.b)({id:t.id}).then(function(i){i.Data.map(function(e,i){0==e.Incomes&&0==e.Expenses||(t.income+=e.Incomes,t.expense+=e.Expenses,t.incomeLast+=e.LastIncomes,t.expenseLast+=e.LastExpenses,t.chart1.data.push(a()({},e,{name:e.Name+" - "+e.Manufacturer.Name+" - "+e.EquipmentCode+"?"+i,"收入":Number(e.Incomes/1e4),"支出":Number(e.Expenses/1e4),brand:e.Manufacturer.Name,model:e.EquipmentCode,value:Number(e.PurchaseAmount/1e4),seriesNumber:e.AssetCode,department:e.Department.Name,start_time:e.InstalStartDate,status:e.EquipmentStatus.Name})))}),0==t.expenseLast?t.rate2=0:t.rate2=(t.expense-t.expenseLast)/t.expenseLast,0==t.incomeLast?t.rate1=0:t.rate1=(t.income-t.incomeLast)/t.incomeLast,e()})})},random:function(t,e){return Math.floor(Math.random()*(e-t))+t},getChart3:function(){var t=this,e=this;return new s.a(function(i){Object(o.i)({id:t.currentData.ID}).then(function(n){var a=t.radarTemplate;a[0].value=n.Data.Repair,a[1].value=n.Data.Maintain,a[2].value=n.Data.Inspection,a[3].value=n.Data.OnSiteInspection,a[4].value=n.Data.Correcting;for(var r=0,s=0;s<a.length;s++)r<a[s].value&&(r=a[s].value);e.maxCount=r,e.maxTickCount=r>5?5:r<2?2:r,e.chart3.list=a;var o=(new(0,d.DataSet.DataView)).source(e.chart3.list);o.transform({type:"fold",fields:["value"],key:"user",value:"score"}),t.chart3.data=o,i(o)})})},itemColor:function(t){switch(t){case 1:case 3:return"#E64340";case 4:case 2:case 5:return"#3eaf7c";default:return"#f0f0f0"}},getTimeline:function(){var t=this;Object(o.k)({id:this.currentData.ID}).then(function(e){if(0!=t.currentData.ID){t.timelineTitle=e.Data.Name+" - "+e.Data.EquipmentCode;var i=e.Data.Dispatches.map(function(e,i){return{date:e.EndDate.split("T")[0],event:e.TimelineDesc,color:t.itemColor(e.RequestType.ID),id:e.ID,requestType:e.RequestType.ID}});t.timeline=i}else t.timeline=[]})},renderChart1:function(){var t=this,e=new d.DataSet.DataView;e.source(this.chart1.data).transform({type:"map",callback:function(t){return t["支出"]*=-1,t}}).transform({type:"fold",fields:["收入","支出"],key:"opinion",value:"value",retains:["name"]});var i={"收入":"#86C7E6","支出":"#1B85E7"},n=new c.a.Chart({container:"chart1",forceFit:t.chart1.data.length<=20,height:document.querySelector("#chart1").clientHeight,width:48*t.chart1.data.length,padding:[Object(u.b)(1.6),0,0,0]});n.source(e),n.axis(!1),this.chart1.data.forEach(function(t,e){t["支出"]>t["收入"]&&n.guide().regionFilter({top:!0,start:[e-.5,-t["收入"]],end:[e+.5,-t["支出"]],color:"#E2340D"})}),n.tooltip({inPlot:!0,useHtml:!0,htmlContent:function(e,i){var n={};return t.chart1.data.forEach(function(t){t.name===e&&(n=t)}),'<div class="g2-tooltip">\n                    <div class="g2-tooltip-title">'+e.split("?")[0]+'</div>\n                    <ul class="g2-tooltip-list">\n                      <li class="g2-tooltip-li">设备价值：'+t.numberComma(Math.floor(Number(n.value)))+'万</li>\n                      <li class="g2-tooltip-li">型号：'+t.numberComma(n.model)+'</li>\n                      <li class="g2-tooltip-li">品牌：'+t.numberComma(n.brand)+'</li>\n                      <li class="g2-tooltip-li">收入：'+t.numberComma(Math.floor(Number(n.收入)))+'万</li>\n                      <li class="g2-tooltip-li">支出：'+t.numberComma(Math.floor(Number(n.支出)))+"万</li>\n                    </ul>\n                  </div>"}}),n.coord(),n.intervalStack().position("name*value").color("opinion",function(t){return i[t]}),n.on("click",function(e){var i=n.getSnapRecords({x:e.x,y:e.y})[0]._origin.name,a=t.chart1.data.find(function(t){return t.name===i});t.currentData=a,t.getChart3().then(function(){t.renderChart3()}),t.getTimeline()}),n.render()},renderChart3:function(){document.querySelector("#chart3").innerHTML="",this.chart3.chart=new c.a.Chart({container:"chart3",forceFit:!0,height:document.querySelector("#chart3").clientHeight,padding:[Object(u.b)(.5),Object(u.b)(.2),0,Object(u.b)(.1)]}),this.chart3.chart.source(this.chart3.data,{score:{min:0,max:this.maxCount,tickCount:this.maxTickCount}}),this.chart3.chart.coord("polar",{radius:.6}),this.chart3.chart.axis("item",{line:null,label:{textStyle:{fontSize:Object(u.b)(.3),fontWeight:"bold"}},tickLine:null,grid:{lineStyle:{lineDash:null},hideFirstLine:!1}}),this.chart3.chart.axis("score",{label:null,line:null,tickLine:null,grid:{type:"polygon",lineStyle:{lineWidth:Object(u.b)(.02),lineDash:null}}}),this.chart3.chart.legend(!1),this.chart3.chart.tooltip({"g2-tooltip":{"background-color":"rgba(0, 0, 0, 0.7)",color:"#ddd"},itemTpl:'<li style="font-size: .4rem;">次数：{value}</li>'}),this.chart3.chart.line().position("item*score").color("user").size(Object(u.b)(.01)),this.chart3.chart.area().position("item*score").color("user"),this.chart3.chart.render()},numberComma:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return(t=String(t).split("."))[0]=t[0].replace(new RegExp("(\\d)(?=(\\d{"+e+"})+$)","ig"),"$1,"),t.join(".")}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"b-left"},[n("div",{staticClass:"b-left-top"},[n("div",{staticClass:"chart1-box"},[n("div",{staticStyle:{"z-index":"10",position:"absolute",cursor:"pointer",left:"0.25rem"},on:{click:function(e){return t.returnToDashboard()}}},[n("img",{staticStyle:{opacity:"0.3"},attrs:{width:"35px",src:i("l9dy")},on:{click:function(e){return t.returnToDashboard()}}})]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),n("div",{staticClass:"list-box1"},[n("div",{staticClass:"list"},[n("div",{staticClass:"total"},[n("div",{staticClass:" center-center value"},[t._v(t._s(t.numberComma(Math.floor(t.income/1e4))))]),t._v(" "),n("div",{staticClass:" center-center text"},[t._v("总收入（万元）")])]),t._v(" "),n("div",{class:t.rate1>0?"status up green":"status down red"},[n("div",{staticClass:" center-center value"},[n("span",[t._v(t._s(Math.abs((100*t.rate1).toFixed(2)))+"%")]),t._v(" "),n("span",{staticClass:"iconfont icon-shang"})]),t._v(" "),n("div",{staticClass:" center-center text"},[t._v("\n                  同比\n                ")])])]),t._v(" "),n("div",{staticClass:"list"},[n("div",{staticClass:"total"},[n("div",{staticClass:" center-center value"},[t._v(t._s(t.numberComma(Math.floor(t.expense/1e4))))]),t._v(" "),n("div",{staticClass:" center-center text"},[t._v("总支出（万元）")])]),t._v(" "),n("div",{class:t.rate2>0?"status up green":"status down red"},[n("div",{staticClass:" center-center value"},[n("span",[t._v(t._s(Math.abs((100*t.rate2).toFixed(2)))+"%")]),t._v(" "),n("span",{staticClass:"iconfont icon-shang"})]),t._v(" "),n("div",{staticClass:" center-center text"},[t._v("\n                  同比\n                ")])])])]),t._v(" "),n("div",{attrs:{id:"chart1"}})])]),t._v(" "),n("div",{staticClass:"b-left-bottom"},[n("div",{staticClass:"name",staticStyle:{width:"90%","z-index":"10"},attrs:{title:t.currentData.name.split("?")[0]+" - "+t.currentData.seriesNumber}},[t._v("\n          "+t._s(t.currentData.name.split("?")[0]+" - "+t.currentData.seriesNumber)+"\n        ")]),t._v(" "),n("div",{staticClass:"name-lower-box"},[n("div",{staticClass:"name-lower"},[n("span",[t._v("当前位置：")]),t._v(" "),n("span",{staticStyle:{"margin-top":"5px",color:"rgb(55, 65, 74)"},attrs:{title:t.currentData.department}},[t._v(t._s(t.currentData.department))])]),t._v(" "),n("div",{staticClass:"name-lower"},[n("span",[t._v("安装日期：")]),t._v(" "),n("span",{staticStyle:{"margin-top":"5px",color:"rgb(55, 65, 74)"},attrs:{title:t.currentData.start_time.split("T")[0]}},[t._v(t._s(t.currentData.start_time.split("T")[0]))])]),t._v(" "),n("div",{staticClass:"name-lower"},[n("span",[t._v("当前状态：")]),t._v(" "),n("span",{staticStyle:{"margin-top":"5px",color:"rgb(55, 65, 74)"},attrs:{title:t.currentData.status}},[t._v(t._s(t.currentData.status))])]),t._v(" "),t._l(t.chart3.list,function(e,i){return n("div",{key:i,staticClass:"name-lower"},[n("span",[t._v(t._s(e.item))]),t._v(" "),n("span",[t._v("：")]),t._v(" "),n("span",{staticStyle:{"margin-top":"5px",color:"rgb(55, 65, 74)"},attrs:{title:e.value}},[t._v(t._s(e.value))])])})],2),t._v(" "),n("div",{attrs:{id:"chart3"}})])]),t._v(" "),n("div",{staticClass:"b-right"},[n("div",{staticClass:"b-right-content"},[n("div",{staticClass:"timeline-title",staticStyle:{"font-size":"0.64rem",cursor:"auto","line-height":"1.2"}},[t._v(t._s(t.timelineTitle))]),t._v(" "),n("div",{staticClass:"b-timeline"},[n("timeline",t._l(t.timeline,function(e,i){return n("timeline-item",{key:i,attrs:{title:e.date+" "+e.event,"bg-color":e.color},nativeOn:{click:function(i){return t.navigateTo(e)}}},[n("p",{staticClass:"timelineP",staticStyle:{cursor:"pointer"}},[t._v(t._s(e.date)+" "+t._s(e.event))])])}),1)],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{position:"absolute",left:"1.25rem"}},[e("span",{staticStyle:{"border-left":"5px solid #86C7E6","border-right":"5px solid #86C7E6","border-bottom":"5px solid #86C7E6","border-top":"5px solid #86C7E6",display:"inline-block"}}),this._v(" 收入")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{position:"absolute",top:"1rem",left:"1.25rem"}},[e("span",{staticStyle:{"border-left":"5px solid #1B85E7","border-right":"5px solid #1B85E7","border-bottom":"5px solid #1B85E7","border-top":"5px solid #1B85E7",display:"inline-block"}}),this._v(" 支出")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{position:"absolute",top:"1.5rem",left:"1.25rem"}},[e("span",{staticStyle:{"border-left":"5px solid red","border-right":"5px solid red","border-bottom":"5px solid red","border-top":"5px solid red",display:"inline-block"}}),this._v(" 盈亏")])}]};var b=i("VU/8")(f,v,!1,function(t){i("boGa")},"data-v-0348e7cc",null);e.default=b.exports},"6dj7":function(t,e,i){(function(t){"use strict";!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),i=" .timeline { padding: 0; position: relative; list-style: none; font-family: PingFangSC-light, Avenir, Helvetica, Arial, Hiragino Sans GB, Microsoft YaHei, sans-serif; -webkit-font-smoothing: antialiased; margin: 10px 20px; } .timeline:after { position: absolute; content: ''; left: 0; top: 0; width: 1px; height: 100%; background-color: var(--timelineTheme); } .timeline-item { position: relative; margin: 1.5em 0 0 28px; padding-bottom: 1.5em; border-bottom: 1px dotted var(--timelineTheme); } .timeline-item:last-child { border-bottom: none; } .timeline-circle { position: absolute; top: .28em; left: -34px; width: 10px; height: 10px; border-radius: 50%; border: 1px solid var(--timelineTheme); background-color: var(--timelineTheme); z-index: 1; box-sizing: content-box; } .timeline-circle.hollow { background-color: var(--timelineBg); } .timeline-title { position: relative; display: inline-block; /** * BFC inline-block 元素与其兄弟元素、子元素和父元素的外边距都不会折叠（包括其父元素和子元素） */ cursor: crosshair; margin: -.15em 0 15px 28px } .timeline-title:not(:first-child) { margin-top: 28px; } .timeline-title-circle { left: -36px; top: .15em; width: 16px; height: 16px; } .timeline-others { width: 40px; height: auto; top: .2em; left: -48px; line-height: 1; padding: 2px 0; text-align: center; border: none; background-color: var(--timelineBg); } ";e.type="text/css",e.styleSheet?e.styleSheet.cssText=i:e.appendChild(document.createTextNode(i)),t.appendChild(e)}}();var e={render:function(){var t=this.$createElement;return(this._self._c||t)("ul",{ref:"timeline",staticClass:"timeline"},[this._t("default")],2)},staticRenderFns:[],name:"Timeline",props:{timelineTheme:{type:String,default:"#dbdde0"},timelineBg:{type:String,default:"#fff"}},mounted:function(){var t=this.$refs.timeline;t.style.setProperty("--timelineTheme",this.timelineTheme),t.style.setProperty("--timelineBg",this.timelineBg)}};!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),t.appendChild(e)}}();var i={name:"TimelineItemBase",props:{bgColor:{type:String,default:""},lineColor:{type:String,default:""},hollow:{type:Boolean,default:!1},fontColor:{type:String,default:"#37414a"}},data:function(){return{slotOthers:!1}},computed:{circleStyle:function(){if(this.bgColor||this.lineColor||this.hollow){var t={};return this.bgColor&&(t={"border-color":this.bgColor,"background-color":this.bgColor}),this.lineColor&&(t=Object.assign({},t,{"border-color":this.lineColor})),t}},itemStyle:function(){return{color:this.fontColor}},slotClass:function(){var t="";return this.slotOthers?t="timeline-others":this.hollow&&(t="hollow"),t}},mounted:function(){this.slotOthers=!!this.$refs.others.innerHTML}};!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),t.appendChild(e)}}();var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"timeline-item",style:this.itemStyle},[e("div",{ref:"others",staticClass:"timeline-circle",class:this.slotClass,style:this.circleStyle},[this._t("others")],2),this._v(" "),this._t("default")],2)},staticRenderFns:[],extends:i};!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),t.appendChild(e)}}();var a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"timeline-title",style:this.itemStyle},[e("div",{ref:"others",staticClass:"timeline-circle timeline-title-circle",class:this.slotClass,style:this.circleStyle},[this._t("others")],2),this._v(" "),this._t("default")],2)},staticRenderFns:[],extends:i};"undefined"!=typeof window&&window.Vue&&(window.Vue.component(e.name,e),window.Vue.component(n.name,n),window.Vue.component(a.name,a)),t.Timeline=e,t.TimelineItem=n,t.TimelineTitle=a,Object.defineProperty(t,"__esModule",{value:!0})})(e)},NpIQ:function(t,e){e.f={}.propertyIsEnumerable},R4wc:function(t,e,i){var n=i("kM2E");n(n.S+n.F,"Object",{assign:i("To3L")})},To3L:function(t,e,i){"use strict";var n=i("+E39"),a=i("lktj"),r=i("1kS7"),s=i("NpIQ"),o=i("sB3e"),l=i("MU5D"),c=Object.assign;t.exports=!c||i("S82l")(function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=c({},t)[i]||Object.keys(c({},e)).join("")!=n})?function(t,e){for(var i=o(t),c=arguments.length,d=1,u=r.f,m=s.f;c>d;)for(var h,p=l(arguments[d++]),f=u?a(p).concat(u(p)):a(p),v=f.length,b=0;v>b;)h=f[b++],n&&!m.call(p,h)||(i[h]=p[h]);return i}:c},V3tA:function(t,e,i){i("R4wc"),t.exports=i("FeBl").Object.assign},boGa:function(t,e){},l9dy:function(t,e,i){t.exports=i.p+"Content/img/back.d319c42.png"},woOf:function(t,e,i){t.exports={default:i("V3tA"),__esModule:!0}}});
//# sourceMappingURL=radar.js.map